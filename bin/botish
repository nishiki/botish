#!/usr/bin/ruby

$LOAD_PATH << File.expand_path('../../lib', __FILE__)

require 'optparse'
require 'botish/botish'

options = {}

OptionParser.new do |opts|
  opts.banner = 'Usage: botish --host irc.freenode.net --channel "test" [options]'

  opts.on('-c', '--config PATH') do |path|
    options[:config_file] = path
  end

  opts.on('-h', '--help') do
    puts opts
    exit 0
  end
end.parse!

Dir["#{File.expand_path('../../modules', __FILE__)}/*"].each do |f|
  require_relative f
end

botish = Botish::Botish.new(options[:config_file])
botish.connect
botish.listen
